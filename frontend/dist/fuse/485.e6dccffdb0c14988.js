"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[485],{4485:(A,p,n)=>{n.r(p),n.d(p,{SsoLoginModule:()=>I});var g=n(6895),m=n(4466),a=n(9299),h=n(262),f=n(2843),l=n(2340),c=n(6325),o=n(4650);let v=(()=>{class t{constructor(e,s,i){this._router=e,this.dialogRef=s,this.data=i}ngOnInit(){setTimeout(()=>{this.cancel()},2e3)}cancel(){this._router.navigate(["user/login"]),this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(a.F0),o.Y36(c.so),o.Y36(c.WI))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-error-modal"]],decls:7,vars:0,consts:[[1,"w-60","md:pt-8","md:pb-4","lg:w-100","xl:w-120"],[1,"flex","flex-row","flex-wrap","items-center","justify-center"],[1,"text-center","modal-content"],[1,"text-center","text-red-600","text-2xl","font-[500]","md:text-3xl"],[1,"mx-auto","mt-4","submit-btn","rounded","text-white","font-semibold","py-2","px-4","bg-[#28243efc]",3,"click"]],template:function(e,s){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),o._uU(4," Login Failed "),o.qZA(),o.TgZ(5,"button",4),o.NdJ("click",function(){return s.cancel()}),o._uU(6," Cancel "),o.qZA()()()())}}),t})();var d=n(529),S=n(3900),L=n(9646);let y=(()=>{class t{constructor(e,s){this.http=e,this.httpBackend=s,this.http=new d.eN(s)}login(e){let s=new FormData;s.append("jwt",e);const i=(new d.WM).set("Accept","application/json");return this.http.post(`${l.N.base_URL}/api/sso-login`,s,{headers:i}).pipe((0,S.w)(u=>(0,L.of)(u)))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(d.eN),o.LFG(d.jN))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var x=n(9248),C=n(605);function M(t,r){1&t&&(o.TgZ(0,"div"),o._UZ(1,"app-loader"),o.qZA())}const j=[{path:"",component:(()=>{class t{constructor(e,s,i,u,F){this.route=e,this._router=s,this.ssoApi=i,this.eventService=u,this.dialog=F,this.base_url=l.N.base_URL}ngOnInit(){this.loading=!0,this.jwt=this.route.snapshot.queryParamMap.get("jwt"),this.ssoApi.login(this.jwt).pipe((0,h.K)(e=>(console.error("An error occurred during login:",e?.error?.message),this.loading=!1,this.dialog.open(v),(0,f._)(e)))).subscribe(e=>{this.loading=!1,e.status&&1==e.status&&(this.user_id=e?.data?.user?.id,this.user_type=e?.data?.user?.user_type,this.token=e?.data?.token,this.redirect_url=e?.data?.redirect_url,localStorage.setItem("user-id",this.user_id),localStorage.setItem("auth-token",this.token),"jobseeker"==this.user_type?localStorage.setItem("type-code",l.N.jobseeker_type_code):"admin"==this.user_type?localStorage.setItem("type-code",l.N.admin_type_code):localStorage.setItem("type-code",l.N.employer_type_code),this.eventService.triggerEvent(1),window.location.replace(this.redirect_url))})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(a.gz),o.Y36(a.F0),o.Y36(y),o.Y36(x.P),o.Y36(c.uw))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-sso-login"]],decls:2,vars:1,consts:[[1,"flex","justify-center","items-center","h-screen"],[4,"ngIf"]],template:function(e,s){1&e&&(o.TgZ(0,"div",0),o.YNc(1,M,2,0,"div",1),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",s.loading))},dependencies:[g.O5,C.R]}),t})()}];let w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[a.Bz.forChild(j),a.Bz]}),t})(),I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[g.ez,w,m.m,c.Is]}),t})()}}]);