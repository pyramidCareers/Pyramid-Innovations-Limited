"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[755],{7755:(B,g,n)=>{n.r(g),n.d(g,{CoursesModule:()=>J});var l=n(6895),c=n(4006),m=n(7392),d=n(9299),p=n(2340),x=n(262),f=n(2843),v=n(8951),h=n(8258),e=n(4650),C=n(6325),_=n(3922),b=n(6430);function y(r,i){1&r&&(e.TgZ(0,"div",2),e._UZ(1,"div",3),e.qZA())}function T(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16),e.NdJ("click",function(){const a=e.CHM(t).$implicit,u=e.oxw(3);return e.KtG(u.gotoCourse(a.id))}),e._UZ(2,"img",17),e.TgZ(3,"div",18)(4,"div")(5,"div",19)(6,"h3",20),e._uU(7),e.qZA(),e._UZ(8,"p",21),e.qZA()()()()()}if(2&r){const t=i.$implicit;e.xp6(2),e.Q6J("src",null==t?null:t.courseimage,e.LSH),e.xp6(5),e.hij(" ",null==t?null:t.fullname," "),e.xp6(1),e.Q6J("innerHTML",null==t?null:t.summary,e.oJD)}}function w(r,i){if(1&r&&(e.TgZ(0,"div",12)(1,"div",13),e.YNc(2,T,9,3,"div",14),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.currentPageCourses)}}function P(r,i){1&r&&(e.TgZ(0,"div",12)(1,"div",22)(2,"div")(3,"h1",23),e._uU(4," No Course Found "),e.qZA()()()())}function k(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",24)(1,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.goPrev())}),e.O4$(),e.TgZ(2,"svg",26),e._UZ(3,"path",27),e.qZA(),e._uU(4," Prev "),e.qZA(),e.kcU(),e.TgZ(5,"button",28),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.goNext())}),e._uU(6," Next "),e.O4$(),e.TgZ(7,"svg",29),e._UZ(8,"path",30),e.qZA()()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.ekj("cursor-not-allowed",t.prevBtnDisabled),e.Q6J("disabled",t.prevBtnDisabled),e.xp6(4),e.ekj("cursor-not-allowed",t.nextBtnDisabled),e.Q6J("disabled",t.nextBtnDisabled)}}function Z(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"input",8),e.NdJ("keyup",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.searchCourses())})("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.searchText=o)}),e.qZA(),e.TgZ(5,"mat-icon",9),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.searchCourses())}),e.qZA()()()(),e.YNc(6,w,3,1,"div",10),e.YNc(7,P,5,0,"div",10),e.YNc(8,k,9,6,"div",11),e.qZA()}if(2&r){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.searchText),e.xp6(2),e.Q6J("ngIf",(null==t.currentPageCourses?null:t.currentPageCourses.length)>0),e.xp6(1),e.Q6J("ngIf",0===(null==t.currentPageCourses?null:t.currentPageCourses.length)),e.xp6(1),e.Q6J("ngIf",(null==t.currentPageCourses?null:t.currentPageCourses.length)>0)}}const A=[{path:"",component:(()=>{class r{constructor(t,s,o,a,u,j,N){this._router=t,this.dialog=s,this.route=o,this._route=a,this._getToken=u,this.petApi=j,this.document=N,this.per_page=6,this.courses=[],this.searchText="",this.currentPage=1,this.loading=!1,this.selectedCourse="",this.addedCourses=[],this.prevBtnDisabled=!1,this.nextBtnDisabled=!1,this.returnURL=window.location.href}ngOnInit(){this.loading=!0,this.document.body.scrollTop=0,this.document.documentElement.scrollTop=0,this.petApi.getCourses("").subscribe(s=>{this.loading=!1,this.courses=s?.courses,this.getCurrentPageCourses()})}setPreAddedCourseStatus(){for(let t of this.courses)t.alreadyAdded=!1;for(let t of this.addedCourses)for(let s of this.courses)t?.condition_value==s.id&&(s.alreadyAdded=!0)}savePET(t){this.condition_value=t.id,this.condition_description=t.fullname,this.petApi.addPET(this.jobId,this.condition_value,this.condition_description).pipe((0,x.K)(s=>(this.dialog.open(v.o,{data:{errorMessage:s?.error?.message}}),(0,f._)("An error occurred while creating the PET.")))).subscribe(s=>{s.status&&(localStorage.setItem("job-id",this.jobId),1==this.unlockParam?this.petApi.unlockJob(this.jobId).subscribe(o=>{this.dialog.open(h.p)}):this.dialog.open(h.p))})}goToJobDetails(){this._router.navigate(["jobs",this.jobId])}searchCourses(){this.petApi.getCourses(this.searchText).subscribe(t=>{this.courses=t?.courses,this.getCurrentPageCourses()})}getCurrentPageCourses(){let t=(this.currentPage-1)*this.per_page,s=t+this.per_page-1;this.currentPageCourses=[];for(let o=t;o<=s&&o<this.courses.length;o++)this.courses[o]?.summary.length>180&&(this.courses[o].summary=this.courses[o].summary.substring(0,180)+"..."),this.currentPageCourses.push(this.courses[o]);this.prevBtnDisabled=0==t,this.nextBtnDisabled=s+1>=this.courses.length}goPrev(){this.document.body.scrollTop=0,this.document.documentElement.scrollTop=0,this.currentPage-1>0&&(this.currentPage--,this.getCurrentPageCourses())}goNext(){this.document.body.scrollTop=0,this.document.documentElement.scrollTop=0,(this.currentPage+1-1)*this.per_page<this.courses.length&&(this.currentPage++,this.getCurrentPageCourses())}gotoCourse(t){const s=p.N.moodle_base_URL+"/course/view.php?id="+t;this._getToken.getToken(localStorage.getItem("user-email"),localStorage.getItem("moodle-token"),s,this.returnURL).subscribe(o=>{window.open(`${p.N.moodle_base_URL}/auth/pyramid/callback.php?token=${o?.data?.jwtToken}`,"_blank")})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(d.F0),e.Y36(C.uw),e.Y36(d.gz),e.Y36(d.gz),e.Y36(_.W),e.Y36(b.$),e.Y36(l.K0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-courses"]],decls:2,vars:2,consts:[["class","h-screen flex justify-center items-center",4,"ngIf"],["class","min-h-screen parent-container mx-auto py-5",4,"ngIf"],[1,"h-screen","flex","justify-center","items-center"],[1,"loader"],[1,"min-h-screen","parent-container","mx-auto","py-5"],[1,"sm:flex","sm:justify-center"],[1,"sm:w-2/3","lg:w-1/3","mb-2","mx-auto","py-auto","sm:mx-0","lg:pt-2"],[1,"relative"],["type","text","placeholder","Search Courses..","name","searchText",1,"border","border-gray-700","rounded-md","py-2","h-10","pl-4","pr-10","w-full","sm:text-sm",3,"ngModel","keyup","ngModelChange"],["svgIcon","heroicons_solid:search",1,"absolute","right-2","top-2","text-gray-700",3,"click"],["class","grid-container flex flex-row justify-center sm:mx-0 flex-wrap gap-5 w-full courseGrid mb-6 sm:mb-12",4,"ngIf"],["class","flex items-center justify-center mb-12",4,"ngIf"],[1,"grid-container","flex","flex-row","justify-center","sm:mx-0","flex-wrap","gap-5","w-full","courseGrid","mb-6","sm:mb-12"],[1,"card-container"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[3,"click"],["alt","Course Image",1,"course-image","cursor-pointer","h-50",3,"src"],[1,"course-details","flex","items-center","cursor-pointer"],[1,"px-2.5"],[1,"text-lg","font-[700]","mt-3"],[1,"min-h-36","mt-3",3,"innerHTML"],[1,"min-h-128"],[1,"text-red-600","text-2xl","sm:text-3xl","md:text-5xl","font-bold","my-auto","mt-1/4"],[1,"flex","items-center","justify-center","mb-12"],[1,"inline-flex","items-center","px-4","py-2","mr-3","text-sm","font-medium","text-gray-500","rounded","bg-white","border","border-gray-300","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"disabled","click"],["aria-hidden","true","fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","mr-2"],["fill-rule","evenodd","d","M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l2.293 2.293a1 1 0 010 1.414z","clip-rule","evenodd"],[1,"inline-flex","items-center","px-4","py-2","text-sm","font-medium","rounded","text-gray-500","bg-white","border","border-gray-300","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"disabled","click"],["aria-hidden","true","fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","ml-2"],["fill-rule","evenodd","d","M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z","clip-rule","evenodd"]],template:function(t,s){1&t&&(e.YNc(0,y,2,0,"div",0),e.YNc(1,Z,9,4,"div",1)),2&t&&(e.Q6J("ngIf",s.loading),e.xp6(1),e.Q6J("ngIf",!s.loading))},dependencies:[c.Fj,c.JJ,c.On,l.sg,l.O5,m.Hw],styles:[".parent-container[_ngcontent-%COMP%]{width:80%!important;margin-left:10%!important;margin-right:10%!important}.card[_ngcontent-%COMP%]{width:300px;margin:10px;border:1px solid #c7c5c5;border-radius:5px}.card-container[_ngcontent-%COMP%]{display:flex;column-gap:18px!important;row-gap:18px!important;flex-wrap:wrap;justify-content:center!important;min-height:442px!important}@media (min-width: 600px) and (max-width: 900px){.card[_ngcontent-%COMP%]{width:270px!important}}"]}),r})(),canActivate:[n(1643).a]}];let J=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.u5,l.ez,m.Ps,d.Bz.forChild(A)]}),r})()}}]);